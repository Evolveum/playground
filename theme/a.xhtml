<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ice="http://www.icesoft.com/icefaces/component">
	<f:view locale="#{lang.currentLocale}" contentType="text/html; charset=utf-8">
<h:head>
	<title>midPoint</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />	
	<link type="text/css" href="./reset.css" rel="stylesheet" />
	<link type="text/css" href="./a.css" rel="stylesheet" />
</h:head>
<h:body>
	<div id="header">
		<div id="login-box">
			<span>
				<ice:outputLabel value="#{lang.messages['header.loggedInAs']}" 
						rendered="#{security.isUserLoggedIn}"/>
			    <em>&nbsp;
			    	<ice:outputLabel value="#{security.shortUserName}" rendered="#{security.isUserLoggedIn}"/>
				</em>
			</span>
			<span>
				<ice:form rendered="#{not security.isUserLoggedIn}" style="display: inline;">			
	                    #{lang.messages['app.language']}:
		            <ui:repeat value="#{lang.supportedLocales}" var="locale">
		                <ice:commandLink immediate="true">
		                    <ice:graphicImage value="/resources/images/flag/#{locale.language}.png" 
		                    	alt="#{locale.language}" styleClass="flag"/>
		                    <f:setPropertyActionListener target="#{lang.currentLanguage}" 
		                    	value="#{locale.language}_#{locale.country}_#{locale.variant}" />
		                </ice:commandLink>
		            </ui:repeat>
	            </ice:form>
            </span>            
            <f:verbatim styleClass="delimiter" rendered="#{security.isUserLoggedIn}">|</f:verbatim>
			<span>
				<ice:outputLink rendered="#{security.isUserLoggedIn}"
					value="#{facesContext.externalContext.requestContextPath}/j_spring_security_logout">
					<span>#{lang.messages['logout.title']}</span>
				</ice:outputLink>
			</span>
			<span class="delimiter">|</span>
			<span class="last">
				<ice:outputLink value="#{facesContext.externalContext.requestContextPath}/help.iface">
					<span>Help</span>
				</ice:outputLink>	
			</span>		 
		</div>
		<div class="container">
			<div id="logo">
				<img src="./logo.png" />
				<span>midPoint</span>				
			</div>			
		</div>
	</div>
	<h:panelGroup rendered="#{security.isUserLoggedIn}" id="nav" layout="block">
		<div class="container">
			<comp:topMenu bean="#{menu}">
				<comp:topMenuItem action="/index?faces-redirect=true" name="Home" description="Start here" />
				<comp:topMenuItem action="/account/index?faces-redirect=true" name="Accounts" description="User in repository" />
				<comp:topMenuItem action="/workItem/index?faces-redirect=true" name="Work Items" description="Requests, approving" />
				<comp:topMenuItem action="/role/index?faces-redirect=true" name="Roles" description="Roles configuration" />
				<comp:topMenuItem action="/resource/index?faces-redirect=true" name="Resources" description="Used systems" />
				<comp:topMenuItem action="/serverTask/index?faces-redirect=true" name="Server Tasks" description="Running tasks" />
				<comp:topMenuItem action="/report/index?faces-redirect=true" name="Reports" description="Audit reports" />
				<comp:topMenuItem action="/configuration/index?faces-redirect=true" name="Configuration" description="Security, logging, import" />
			</comp:topMenu>		
		</div>
	</h:panelGroup>
	<div class="container">
		<div id="sidebar">
			<ui:insert name="menu">
			<comp:leftMenu>
				<comp:leftMenuContainer name="Sample Menu">
					<comp:leftMenuItem name="List Users" action="/asdf/index?faces-redirect=true" />
					<comp:leftMenuItem name="Find Users" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Create Users" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Delete Users" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Load From Resource" action="/index?faces-redirect=true" />
				</comp:leftMenuContainer>
				<comp:leftMenuContainer name="Other Menu Data">
					<comp:leftMenuItem name="List Users" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Export" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Import" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Something Else" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Do stuff" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Sing A Song" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Do stuff" action="/index?faces-redirect=true" />
				</comp:leftMenuContainer>
				<comp:leftMenuContainer name="Last Menu Items">
					<comp:leftMenuItem name="List Users" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Export" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Import" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Something Else" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Do stuff" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Sing A Song" action="/index?faces-redirect=true" />
					<comp:leftMenuItem name="Do stuff" action="/index?faces-redirect=true" />
				</comp:leftMenuContainer>
			</comp:leftMenu>
			<!-- <div>
				<h3>Sample Menu</h3>
				<ul>
					<li class="selected">List Users</li>
					<li>Find Users</li>
					<li>Create User</li>
					<li>Delete Users</li>
					<li>Load From Resource</li>
				</ul>
			</div> -->
			</ui:insert>
			<div class="clear-menu"></div>
		</div>
		<div id="content">
			<div id="wrapper">
				<ice:messages id="messages" errorClass="messages-error" infoClass="messages-info" 
					fatalClass="message-fatal" warnClass="messages-warn" />
				<ui:insert name="content">
					sample content
				</ui:insert>
			</div>
		</div>
	</div>
	<div class="clear"></div>
	<div id="footer">
		<div class="container">
			<p id="credit">&copy; Copyright Evolveum. All Rights Reserved. Theme created by lazyman.</p>
		</div>
	</div>
</h:body>
</f:view>
</html>